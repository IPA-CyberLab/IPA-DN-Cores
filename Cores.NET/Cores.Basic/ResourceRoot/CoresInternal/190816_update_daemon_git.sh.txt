#!/bin/bash

# Automatically generated by the IPA.Cores library

set -eu

if [ $# -eq 0 ]; then
 echo Usage: update_daemon_git.sh \<new_commit_id\>
 exit 1
fi

info="update_daemon_git.sh: updating the git commit ID to '$1' ..."

logger ${info}

git stash

git submodule foreach 'git stash'

git fetch --tags --recurse-submodules=yes

git checkout --force --no-recurse-submodules $1

git submodule update --init --recursive --force

info="update_daemon_git.sh: OK! Commit ID :'$1'."

logger ${info}

exit 0

