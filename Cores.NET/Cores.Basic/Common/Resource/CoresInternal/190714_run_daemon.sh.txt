#!/bin/bash

# Automatically generated by the IPA.Cores library

if [ $# -eq 0 ]; then
 echo Usage: run_daemon.sh \<command_line\>
 exit 1
fi

while [ 1 ];
do
    errstr="run_daemon.sh: starting the command '$@' ..."
    logger ${errstr}
    $@
    retcode=$?
    if [ $retcode -eq 0 ]
    then
        break
    fi
    errstr="run_daemon.sh: the command '$@' abnormally terminated. Returned code: '$retcode'. Restarting..."
    echo ${errstr}
    logger ${errstr}
    sleep 5
done
